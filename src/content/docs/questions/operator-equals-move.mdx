---
title: Оператор присваивания перемещающий
description: Описание оператора перемещающего присваивания
sidebar:
  order: 22
---

import { Aside, Tab, Tabs } from '@astrojs/starlight/components'

<Aside>
Оператор присваивания перемещающий (`operator=`) в C++ используется для перемещения ресурсов от одного объекта к другому, что эффективно передает владение ресурсами без необходимости их копирования.
</Aside>

## Введение
Перемещающий оператор присваивания в C++ позволяет передавать ресурсы от одного объекта другому с минимальными затратами на копирование. Это особенно полезно для объектов, владеющих динамически выделенной памятью или другими ресурсами, такими как файлы или сетевые соединения.

## Синтаксис и работа оператора

### Синтаксис
```cpp
ClassName& ClassName::operator=(ClassName&& other);
```

### Работа
Перемещающий оператор присваивания принимает rvalue-ссылку на другой объект того же типа и перемещает ресурсы от этого объекта к текущему объекту. После перемещения исходный объект остается в валидном, но неопределенном состоянии.

## Примеры использования

### Пример 1: Реализация перемещающего оператора присваивания
```cpp
#include <iostream>

class MyClass {
public:
    int* data;

    // Конструктор
    MyClass(int value) : data(new int(value)) {}

    // Перемещающий конструктор
    MyClass(MyClass&& other) noexcept : data(other.data) {
        other.data = nullptr;
    }

    // Перемещающий оператор присваивания
    MyClass& operator=(MyClass&& other) noexcept {
        if (this != &other) {
            delete data; // освобождение старого ресурса
            data = other.data; // перемещение ресурса
            other.data = nullptr;
        }
        return *this;
    }

    // Деструктор
    ~MyClass() {
        delete data;
    }

    void print() const {
        if (data) {
            std::cout << "Value: " << *data << std::endl;
        } else {
            std::cout << "No data" << std::endl;
        }
    }
};

int main() {
    MyClass obj1(10);
    MyClass obj2(20);

    obj2 = std::move(obj1); // использование перемещающего оператора присваивания

    obj2.print(); // вывод: Value: 10
    obj1.print(); // вывод: No data

    return 0;
}
```

### Вывод
```
Value: 10
No data
```
В этом примере `obj2` перемещает данные из `obj1` с использованием перемещающего оператора присваивания. После перемещения `obj1` остается в состоянии "No data".

## Важные замечания

- Перемещающий оператор присваивания должен освобождать старые ресурсы текущего объекта перед перемещением новых ресурсов.
- Следует проверять самоприсваивание (то есть когда объект присваивается сам себе) и корректно его обрабатывать.
- Перемещающий оператор присваивания обычно используется вместе с перемещающим конструктором.

## Резюме

- **Перемещающий оператор присваивания (`operator=`)** позволяет эффективно передавать ресурсы от одного объекта к другому.
- **Примеры использования** включают перемещение динамически выделенной памяти и других ресурсов, таких как файлы или сетевые соединения.
- **Важно**: корректная реализация перемещающего оператора присваивания должна освобождать старые ресурсы и обрабатывать самоприсваивание.
